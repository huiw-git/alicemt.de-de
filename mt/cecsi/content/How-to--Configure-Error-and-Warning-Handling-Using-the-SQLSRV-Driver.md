---
title: "Vorgehensweise: Konfigurieren der Behandlung von Fehlern und Warnungen unter Verwendung des SQLSRV-Treibers"
ms.custom: na
ms.date: 06/28/2016
ms.prod: sql-non-specified
ms.reviewer: na
ms.suite: na
ms.technology: 
  - drivers
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 257c6f53-9137-4619-a613-eee33d2077e8
caps.latest.revision: 20
caps.handback.revision: 19
manager: jhubbard
translation.priority.ht: 
  - de-de
  - es-es
  - fr-fr
  - it-it
  - ja-jp
  - ko-kr
  - pt-br
  - ru-ru
  - zh-cn
  - zh-tw
---
# Vorgehensweise: Konfigurieren der Behandlung von Fehlern und Warnungen unter Verwendung des SQLSRV-Treibers
Dieses Thema beschreibt, wie der SQLSRV-Treiber zur Behandlung von Fehlern und Warnungen konfiguriert wird.  
  
Standardmäßig werden im SQLSRV-Treiber Warnungen als Fehler behandelt; ein Aufruf einer **sqlsrv** -Funktion, die einen Fehler oder eine Warnung generiert, gibt **false**zurück. Verwenden Sie die Funktion [sqlsrv\_configure](../content/sqlsrv_configure.md), um dieses Verhalten zu deaktivieren. Wenn die folgende Codezeile am Anfang eines Skripts enthalten ist, gibt eine **sqlsrv**-Funktion, die nur Warnungen \(keine Fehler\) generiert, nicht **false** zurück:  
  
`sqlsrv_configure("WarningsReturnAsErrors", 0);`  
  
Die folgende Codezeile setzt das Standardverhalten zurück \(Warnungen werden als Fehler behandelt\):  
  
`sqlsrv_configure("WarningsReturnAsErrors", 1);`  
  
> [!NOTE]  
> Warnungen, die den SQLSTATE-Werten 01000, 01001, 01003 und 01S02 entsprechen, werden nie als Fehler behandelt. Eine **sqlsrv** -Funktion, die nur Warnungen generiert, die einem dieser Zustände entsprechen, gibt unabhängig von der Konfiguration nicht **false**zurück.  
  
Der Wert für **WarningsReturnAsErrors** kann auch in der Datei php.ini festgelegt werden. Zum Beispiel deaktiviert dieser Eintrag im  Abschnitt `[sqlsrv]` der Datei php.ini das Standardverhalten.  
  
`sqlsrv.WarningsReturnAsErrors = 0`  
  
Informationen zum Abrufen von Fehler- und Warnungsinformationen finden Sie unter [sqlsrv_errors](../content/sqlsrv_errors.md) und unter [Vorgehensweise: Behandeln von Fehlern und Warnungen](../Topic/How%20to:%20Handle%20Errors%20and%20Warnings%20Using%20the%20SQLSRV%20Driver.md).  
  
## Beispiel  
Das folgende Codebeispiel veranschaulicht, wie das Standardverhalten der Fehlerbehandlung deaktiviert wird. Das Beispiel verwendet den Befehl PRINT von Transact\-SQL, um eine Warnung zu generieren. Weitere Informationen zum Befehl PRINT, finden Sie unter [PRINT \(Transact\-SQL\)](http://go.microsoft.com/fwlink/?linkid=119518).  
  
Das Beispiel veranschaulicht durch das Ausführen einer Abfrage, die eine Warnung generiert, zunächst das Standardverhalten der Fehlerbehandlung. Diese Warnung wird als Fehler behandelt. Nach Ändern der Konfiguration für die Fehlerbehandlung wird die gleiche Abfrage ausgeführt. Die Warnung wird nicht als Fehler behandelt.  
  
Das Beispiel setzt voraus, dass SQL Server auf dem lokalen Computer installiert ist. Wenn das Beispiel über die Befehlszeile ausgeführt wird, werden alle Ausgaben in die Konsole geschrieben.  
  
```  
<?php  
/* Connect to the local server using Windows Authentication. */  
$serverName = "(local)";  
$conn = sqlsrv_connect( $serverName );  
if( $conn === false )  
{  
     echo "Could not connect.\n";  
     die( print_r( sqlsrv_errors(), true));  
}  
  
/* The Transact-SQL PRINT statement can be used to return   
informational or warning messages*/  
$tsql = "PRINT 'The PRINT statement can be used ";  
$tsql .= "to return user-defined warnings.'";  
  
/* Execute the query and print any errors. */  
$stmt1 = sqlsrv_query( $conn, $tsql);  
if($stmt1 === false)  
{  
     echo "By default, warnings are treated as errors:\n";  
     /* Dump errors in the error collection. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
  
/* Disable warnings as errors behavior. */  
sqlsrv_configure("WarningsReturnAsErrors", 0);  
  
/* Execute the same query and print any errors. */  
$stmt2 = sqlsrv_query( $conn, $tsql);  
if($stmt2 === false)  
{  
     /* Dump errors in the error collection. */  
     /* Since the warning generated by the query will not be treated as   
        an error, this block of code will not be executed. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
else  
{  
     echo "After calling ";  
     echo "sqlsrv_configure('WarningsReturnAsErrors', 0), ";  
     echo "warnings are not treated as errors.";  
}  
  
/*Close the connection. */  
sqlsrv_close($conn);  
?>  
```  
  
## Siehe auch  
[Protokollieren von Aktivitäten](../content/Logging-Activity.md)  
[Programmierhandbuch für den PHP-SQL-Treiber](../content/Programming-Guide-for-PHP-SQL-Driver.md)
[API-Referenz für den SQLSRV-Treiber](../content/SQLSRV-Driver-API-Reference.md)  
  
